"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}define(["TYPO3/CMS/Backend/Notification","TYPO3/CMS/Backend/ActionButton/ImmediateAction","TYPO3/CMS/Z7Semantilizer/Backend/Headline","TYPO3/CMS/Z7Semantilizer/Backend/Converter","TYPO3/CMS/Z7Semantilizer/Backend/Translate"],function(a,s,r,e,o){var i=function(){function n(e,t){_classCallCheck(this,n),this.headlines=t||[],this.key=e}return _createClass(n,[{key:"addHeadline",value:function(e){this.headlines.push(e)}},{key:"render",value:function(e){var t=this,n=this.headlines.filter(function(e){return e.isEditableType()&&e.issues.get(t.key).fix}).length,i=[];n&&i.push({label:o("notification.fix")+(1<n?" ("+n+")":""),action:new s(function(){t.headlines.forEach(function(e){return e.issues.fix(t.key)}),r.storeHeadlines(t.headlines,function(){"function"==typeof e&&e(),a.success(o("notification.fixed.title"),o("notification."+t.key+".title"),4)})})});n="mainHeadingNumber"===this.key?"info":"warning";a[n](o("notification."+this.key+".title"),o("notification."+this.key+".description"),10,i)}}]),n}(),n=function(){function n(e,t){_classCallCheck(this,n),this.key=e,null===this.get()&&this.set(t)}return _createClass(n,[{key:"get",value:function(){var e=localStorage.getItem(this.key);return null===e?null:parseInt(e)}},{key:"set",value:function(e){localStorage.setItem(this.key,e?"1":"0")}},{key:"enabled",value:function(){return 1===this.get()}},{key:"disabled",value:function(){return!this.enabled()}},{key:"enable",value:function(){this.set(1)}},{key:"disable",value:function(){this.set(0)}}]),n}();return function(){function t(e){return _classCallCheck(this,t),this.parent=e,this.autoload=new n("semantilizer-notification",!0),this}return _createClass(t,[{key:"showIssue",value:function(t){this.parent.notifications.hideAll(),new i(t,this.parent.headlines.filter(function(e){return e.issues.has(t)})).render(this.parent.validate)}},{key:"showIssues",value:function(){var t=this,n={};this.parent.headlines.filter(function(e){return e.issues.count()}).forEach(function(t){return t.issues.each(function(e){n[e.key]=n[e.key]||[],n[e.key].push(t)})}),Object.keys(n).forEach(function(e){return new i(e,n[e]).render(t.parent.validate)})}},{key:"hideAll",value:function(){var t=a.messageContainer;t&&e.toArray(t.childNodes).forEach(function(e){return t.removeChild(e)})}}]),t}()});