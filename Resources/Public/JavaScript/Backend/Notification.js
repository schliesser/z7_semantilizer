import{Translation}from"@zeroseven/semantilizer/Translation.js";import{Cast}from"@zeroseven/semantilizer/Cast.js";import TYPO3Notification from"@typo3/backend/notification.js";import ImmediateAction from"@typo3/backend/action-button/immediate-action.js";class State{constructor(t,i){this.key=t,null===this.get()&&this.set(i)}get(){return Cast.integer(localStorage.getItem(this.key))}set(t){localStorage.setItem(this.key,t?"1":"0")}enabled(){return 1===this.get()}disabled(){return!this.enabled()}enable(){this.set(!0)}disable(){this.set(!1)}}class Notification{constructor(t){return this.parent=t,this.autoload=new State("semantilizer-notification",!0),this}showIssue(i){this.hideAll();const t=this.parent.issues.filter(t=>t.key===i.key);var e=[],a=(t.filter(t=>t.suggestion&&t.headline.isEditableType()).length&&e.push({label:Translation.translate("notification.fix"),action:new ImmediateAction(()=>{t.forEach(t=>t.fix(!1)),this.parent.update(t=>TYPO3Notification.success(Translation.translate("notification.fixed.title"),Translation.translate("notification."+i.key+".title"),4))})}),"mainHeadingNumber"===i.key?"info":"warning");TYPO3Notification[a](Translation.translate("notification."+i.key+".title"),Translation.translate("notification."+i.key+".description"),10,e)}showIssues(){var t=this.parent.issues[0];t&&this.showIssue(t)}hideAll(){let i=window.top.TYPO3&&window.top.TYPO3.Notification&&window.top.TYPO3.Notification.messageContainer?window.top.TYPO3.Notification.messageContainer:"null";i&&Cast.array(i.childNodes).forEach(t=>i.removeChild(t))}}export{Notification};