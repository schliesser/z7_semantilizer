import{EditConfiguration}from"@zeroseven/semantilizer/EditConfiguration.js";import{Cast}from"@zeroseven/semantilizer/Cast.js";class Headline{constructor(t,e){this.parent=e,this.edit=new EditConfiguration(t),this._type=Cast.integer(t.nodeName.replace(/[^0-9]/,"")),this._text=Cast.string(t.innerText),this._isModified=!1,this.showIssue=this.showIssue.bind(this)}get type(){return this._type}set type(t){this._type=Math.min(Math.max(Cast.integer(t),1),6),this._isModified=!0}get text(){return this._text}set text(t){this._text=t.trim()}getEditUrl(){var t;return this.isEditableRecord()?(t=encodeURIComponent(window.top.list_frame.document.location.pathname+window.top.list_frame.document.location.search),window.top.TYPO3.settings.FormEngine.moduleUrl+"&edit["+this.edit.table+"]["+this.edit.uid+"]=edit&returnUrl="+t):null}getIssues(){return this.parent.issues.filter(t=>t.headline===this)}hasIssues(){return 0<this.getIssues().length}showIssue(){this.getIssues().forEach(t=>this.parent.notification.showIssue(t))}hasRelations(){return this.edit.relationId&&0<this.parent.headlines.filter(t=>t.edit.relatedTo===this.edit.relationId).length}relatedHeadline(){if(this.edit.relatedTo){var t=this.parent.headlines.filter(t=>t.edit.relationId===this.edit.relatedTo);if(t.length)return t[t.length-1]}return null}isRelated(){return null!==this.relatedHeadline()}isEditableRecord(){return this.edit.table&&0<this.edit.uid}isEditableType(){return this.isEditableRecord()&&this.edit.field&&!this.isRelated()}isModified(){return this._isModified}hasStored(){this._isModified=!1}update(t){t&&(this.type=t),this.parent.update()}}export{Headline};