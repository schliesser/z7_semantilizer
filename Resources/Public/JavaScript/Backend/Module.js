"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}define(["TYPO3/CMS/Backend/Icons","TYPO3/CMS/Z7Semantilizer/Backend/Node","TYPO3/CMS/Z7Semantilizer/Backend/Edit","TYPO3/CMS/Z7Semantilizer/Backend/Translate"],function(e,d,p,i){return function(){function n(e,t){_classCallCheck(this,n),_defineProperty(this,"element",void 0),_defineProperty(this,"parent",void 0),_defineProperty(this,"headlines",[]),this.element=e,this.parent=t,this.init()}return _createClass(n,[{key:"setHeadlines",value:function(e){this.headlines=e}},{key:"clearContent",value:function(e){for(var t;t=(e||this.element).firstElementChild;)(e||this.element).removeChild(t)}},{key:"drawList",value:function(){var e,l,o=this;this.headlines.length?(new d("p").setContent(i("overview.description")).appendTo(this.element),e=new d("div").setBemClassName("listwrap").appendTo(this.element),l=new d("ul").setBemClassName("list").appendTo(e),this.headlines.forEach(function(t){var e=new d("li").setBemClassName("item","level"+t.type).appendTo(l),n=new d("select").setBemClassName("select").appendTo(e),i=t.edit&&t.edit.table,a=t.edit&&t.edit.uid;if(t.edit&&t.edit.field){for(var r=1;r<=6;r++){var s=new d("option").setAttributes({value:r}).setContent("H"+r).appendTo(n);t.type===r&&(s.selected=!0)}n.addEventListener("change",function(e){e=e.target.options[e.target.selectedIndex].value;new p(t).updateType(e,function(e){e.hasErrors||o.parent.validate()})})}else new d("option").setAttributes({value:"url"}).setContent("H"+t.type).appendTo(n),n.disabled="disabled";(i&&a?new d("a").setAttribute("href",new p(t).getEditUrl()):new d("span")).setContent(t.text).setBemClassName("headline",t.error.length?"error":"").appendTo(e)}),this.wrap=e):new d("p").setContent(i("overview.empty")).appendTo(this.element)}},{key:"lockStructure",value:function(){this.parent.hideAllNotifications();var e=new d("div").setBemClassName("lock").appendTo(this.wrap);new d("span").setBemClassName("lock-message").setContent(i("overview.update")).appendTo(e)}},{key:"drawStructure",value:function(){this.clearContent(),this.drawList()}},{key:"loader",value:function(){var t=this;e.getIcon("spinner-circle",e.sizes.small).then(function(e){t.element.insertAdjacentHTML("beforeend",e+'<span style="margin-left: 0.3em">'+i("overview.loading")+"</span>")})}},{key:"init",value:function(){this.clearContent()}}]),n}()});