"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}define(["TYPO3/CMS/Backend/AjaxDataHandler","TYPO3/CMS/Z7Semantilizer/Backend/Converter"],function(i,l){return function(){function n(e){return _classCallCheck(this,n),this.headline=e,this}return _createClass(n,[{key:"updateType",value:function(e,t){n.updateTypes([{type:e,headline:this.headline}],t)}},{key:"getEditUrl",value:function(){if(this.headline.edit&&this.headline.edit.table&&this.headline.edit.uid){var e=encodeURIComponent(top.list_frame.document.location.pathname+top.list_frame.document.location.search);return top.TYPO3.settings.FormEngine.moduleUrl+"&edit["+this.headline.edit.table+"]["+this.headline.edit.uid+"]=edit&returnUrl="+e}return null}}],[{key:"updateTypes",value:function(e,t){var r={data:{}};e.forEach(function(e){var t=e.headline,n=t.edit?t.edit.table:null,i=t.edit?t.edit.uid:null,a=t.edit?t.edit.field:null,e=l.toInteger(e.type);n&&i&&a&&e&&(r.data[n]=r.data[n]||{},r.data[n][i]={},r.data[n][i][a]=e,t&&t.setType(e))}),Object.keys(r).length&&i.process(r).done(function(e){return"function"==typeof t&&t(e)})}}]),n}()});